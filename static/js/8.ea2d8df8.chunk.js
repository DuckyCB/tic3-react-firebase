(this["webpackJsonptic3-react-firebase"]=this["webpackJsonptic3-react-firebase"]||[]).push([[8],{189:function(t,e,n){"use strict";n.r(e),n.d(e,"default",(function(){return k}));var r=n(0),a=n.n(r),c=n(45),i=n(1),o=n(15),s=(n(104),n(3)),u=n(21),d=n(44),l=n(63),j=n(251),b=n(263),p=n(266),m=n(231),f=n(269),x=n(270),g=n(268),v=n(169),h=n(54),O=n(165),w=n(7);function S(t){var e=t.user,n=e.loading,r=void 0!==n&&n;return Object(w.jsxs)(f.a,{sx:{width:.8},children:[Object(w.jsx)(x.a,{title:Object(w.jsxs)(v.a,{variant:"h5",gutterBottom:!0,children:[e.firstName," ",e.lastName]}),avatar:r?Object(w.jsx)(p.a,{animation:"wave",height:10,width:"80%",style:{marginBottom:6}}):Object(w.jsx)(O.a,{sx:{bgcolor:h.a[500],height:70,width:70},src:e.avatar}),subheader:e.username}),Object(w.jsx)(g.a,{children:Object(w.jsxs)(v.a,{variant:"caption",children:["Number of posts: ",e.postsCount]})})]})}var C=n(232),y=n(102);n(72),n(40);function k(){var t=Object(s.useState)(void 0),e=Object(o.a)(t,2),n=e[0],r=e[1],f=Object(s.useState)([]),x=Object(o.a)(f,2),g=x[0],v=x[1],h=Object(u.g)().username,O=Object(y.a)(d.auth),k=Object(o.a)(O,3);k[0],k[1],k[2];return Object(s.useEffect)((function(){function t(){return(t=Object(i.a)(a.a.mark((function t(){var e;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{e=Object(l.k)(Object(l.c)(d.db,"posts"),Object(l.m)("user.username","==",h),Object(l.j)("createdAt","desc")),Object(l.i)(e,(function(t){var e=[];t.forEach((function(t){e.push(Object(c.a)({id:t.id},t.data()))})),v(e)}))}catch(n){console.error(n.message)}case 1:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function e(){return e=Object(i.a)(a.a.mark((function t(){var e,n,c;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e=Object(l.k)(Object(l.c)(d.db,"users"),Object(l.m)("username","==",h)),t.next=4,Object(l.f)(e);case 4:if(n=t.sent,c=n.docs.map((function(t){return t.data()})),0!==n.docs.length){t.next=9;break}return console.error("user not found"),t.abrupt("return");case 9:r(c[0]),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0.message);case 15:case"end":return t.stop()}}),t,null,[[0,12]])}))),e.apply(this,arguments)}!function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}()}),[]),document.title=n?"u/".concat(n.username):"u/",Object(w.jsx)(w.Fragment,{children:Object(w.jsxs)(j.a,{container:!0,spacing:2,justifyContent:"center",alignItems:"flex-start",children:[Object(w.jsx)(j.a,{item:!0,xs:8,children:g?Object(w.jsx)(m.a,{posts:g}):Object(w.jsx)(C.a,{})}),Object(w.jsx)(j.a,{item:!0,xs:4,children:Object(w.jsx)(b.a,{spacing:4,justifyContent:"center",mb:5,mt:2,alignItems:"left",children:n?Object(w.jsx)(S,{user:n}):Object(w.jsx)(p.a,{animation:"wave",variant:"rectangular",sx:{width:.8,height:150}})})})]})})}},225:function(t,e,n){"use strict";function r(t){var e=t.toDate(),n=e.getUTCMonth()+1;return e.getUTCDate()+"/"+n+"/"+e.getUTCFullYear()}function a(t){var e=t.toDate(),n=e.getUTCMonth()+1,r=e.getUTCDate(),a=e.getUTCFullYear();return(24+e.getUTCHours()-3)%24+":"+(e.getUTCMinutes()>9?e.getUTCMinutes():"0"+e.getUTCMinutes())+" "+r+"/"+n+"/"+a}n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return a}))},228:function(t,e,n){"use strict";var r=n(3),a=n(267),c=n(268),i=n(169),o=n(269),s=n(270),u=n(271),d=n(272),l=n(273),j=n(0),b=n.n(j),p=n(1),m=n(15),f=n(233),x=n.n(f),g=n(234),v=n.n(g),h=n(90),O=n(263),w=n(63),S=n(72),C=n(102),y=n(44),k=n(7),U=n(44).db;function M(t){var e=t.post,n=Object(r.useState)(null),a=Object(m.a)(n,2),c=a[0],o=a[1],s=Object(C.a)(y.auth),u=Object(m.a)(s,3),d=u[0],l=u[1],j=(u[2],e.upVotesCount),f=e.downVotesCount,g=e.usersUpvote,M=e.usersDownvote;Object(r.useEffect)((function(){var t=function(){var t=Object(p.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!l&&d){t.next=2;break}return t.abrupt("return");case 2:return t.t0=o,t.next=5,Object(S.a)(d);case 5:t.t1=t.sent,(0,t.t0)(t.t1);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[d,l]);var W=function(){var t=Object(p.a)(b.a.mark((function t(n){var r,a,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j=e.upVotesCount,f=e.downVotesCount,g=e.usersUpvote,M=e.usersDownvote,r=new Date,"upvote"===n?M.includes(c.id)?(M=M.filter((function(t){return t!==c.id})),f--):(j++,g.push(c.id)):g.includes(c.id)?(g=g.filter((function(t){return t!==c.id})),j--):(f++,M.push(c.id)),a=Object(w.n)(U),i=Object(w.d)(U,"posts",e.id),a.update(i,{upVotesCount:j,downVotesCount:f,usersUpvote:g,usersDownvote:M,updatedAt:w.a.fromDate(r)}),t.next=11,a.commit();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)(O.a,{direction:"row",children:[Object(k.jsx)(h.a,{color:c?e.usersDownvote.includes(c.id)?"disabled":"upvote":"disabled",disabled:!c||e.usersUpvote.includes(c.id),style:c&&e.usersUpvote.includes(c.id)?{color:"#FF8b60"}:{},variant:"outlined",onClick:function(){return W("upvote")},children:Object(k.jsx)(x.a,{})}),Object(k.jsx)(h.a,{color:c?e.usersUpvote.includes(c.id)?"disabled":"downvote":"disabled",disabled:!c||e.usersDownvote.includes(c.id),style:c&&e.usersDownvote.includes(c.id)?{color:"#9494FF"}:{},variant:"outlined",onClick:function(){return W("downvote")},children:Object(k.jsx)(v.a,{})}),Object(k.jsx)(i.a,{p:1,children:e.upVotesCount-e.downVotesCount})]})})}var W=n(165),D=n(54),R=n(71),T=n(225);function z(t){var e=t.post,n=t.fullRender;return e.imgURL&&Object(k.jsx)(a.a,{component:"img",alt:"Image not fetched",image:e.imgURL}),Object(k.jsxs)(c.a,{children:[Object(k.jsx)(i.a,{variant:"h6",display:"block",gutterBottom:!0,children:e.title}),e.imgURL?Object(k.jsx)(a.a,{component:"img",alt:"Image not fetched",image:e.imgURL}):null,Object(k.jsx)(i.a,{sx:n?{padding:4}:{padding:4,maxHeight:250,overflow:"hidden",display:""===e.imgURL?"block":"none"},align:"justify",children:e.content})]})}var F=function(t){var e,n=t.post,r=t.fullRender;n.user&&(e="Posted by u/".concat(n.user.username));var a=Object(T.a)(n.createdAt);return Object(k.jsxs)(o.a,{sx:{width:.6},children:[Object(k.jsx)(s.a,{avatar:Object(k.jsx)(W.a,{sx:{bgcolor:D.a[500]},"aria-label":"recipe",src:n.subKinchoo.avatar}),title:Object(k.jsxs)(u.a,{component:R.b,to:"/r/".concat(n.subKinchoo.subname),sx:{textDecoration:"none",color:"text.primary"},children:["r/",n.subKinchoo.subname]}),subheader:Object(k.jsx)(u.a,{component:R.b,to:"/u/".concat(n.user.username),sx:{textDecoration:"none",color:"text.secondary"},children:e})}),r?Object(k.jsx)(z,{post:n,fullRender:r}):Object(k.jsx)(d.a,{component:R.b,to:"/p/".concat(n.id),children:Object(k.jsx)(z,{post:n,fullRender:r})}),Object(k.jsxs)(l.a,{sx:{justifyContent:"space-between"},children:[Object(k.jsx)(M,{post:n}),Object(k.jsxs)(i.a,{align:"right",children:["Posted: ",a]})]})]},n.id)};F.defaultProps={fullRender:!1};e.a=F},231:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(228),a=n(263),c=n(7);function i(t){var e=t.posts;return Object(c.jsx)(a.a,{spacing:4,justifyContent:"center",mb:5,mt:2,alignItems:"center",children:e.map((function(t){return Object(c.jsx)(r.a,{post:t},t.id)}))})}},232:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(263),a=n(266),c=n(7);function i(){return Object(c.jsxs)(r.a,{spacing:4,justifyContent:"center",mb:5,mt:2,alignItems:"center",children:[Object(c.jsx)(a.a,{animation:"wave",variant:"rectangular",sx:{width:.6,height:500}}),Object(c.jsx)(a.a,{animation:"wave",variant:"rectangular",sx:{width:.6,height:500}}),Object(c.jsx)(a.a,{animation:"wave",variant:"rectangular",sx:{width:.6,height:500}})]})}},251:function(t,e,n){"use strict";var r=n(5),a=n(10),c=n(6),i=n(3),o=(n(18),n(14)),s=n(27),u=n(217),d=n(212),l=n(16),j=n(19);var b=i.createContext(),p=n(24),m=n(158),f=n(213);function x(t){return Object(m.a)("MuiGrid",t)}var g=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],v=Object(f.a)("MuiGrid",["root","container","item","zeroMinWidth"].concat(Object(p.a)([0,1,2,3,4,5,6,7,8,9,10].map((function(t){return"spacing-xs-".concat(t)}))),Object(p.a)(["column-reverse","column","row-reverse","row"].map((function(t){return"direction-xs-".concat(t)}))),Object(p.a)(["nowrap","wrap-reverse","wrap"].map((function(t){return"wrap-xs-".concat(t)}))),Object(p.a)(g.map((function(t){return"grid-xs-".concat(t)}))),Object(p.a)(g.map((function(t){return"grid-sm-".concat(t)}))),Object(p.a)(g.map((function(t){return"grid-md-".concat(t)}))),Object(p.a)(g.map((function(t){return"grid-lg-".concat(t)}))),Object(p.a)(g.map((function(t){return"grid-xl-".concat(t)}))))),h=n(7),O=["className","columns","columnSpacing","component","container","direction","item","lg","md","rowSpacing","sm","spacing","wrap","xl","xs","zeroMinWidth"];function w(t){var e=parseFloat(t);return"".concat(e).concat(String(t).replace(String(e),"")||"px")}var S=Object(l.a)("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(t,e){var n=t.ownerState,r=n.container,a=n.direction,c=n.item,i=n.lg,o=n.md,s=n.sm,u=n.spacing,d=n.wrap,l=n.xl,j=n.xs,b=n.zeroMinWidth;return[e.root,r&&e.container,c&&e.item,b&&e.zeroMinWidth,r&&0!==u&&e["spacing-xs-".concat(String(u))],"row"!==a&&e["direction-xs-".concat(String(a))],"wrap"!==d&&e["wrap-xs-".concat(String(d))],!1!==j&&e["grid-xs-".concat(String(j))],!1!==s&&e["grid-sm-".concat(String(s))],!1!==o&&e["grid-md-".concat(String(o))],!1!==i&&e["grid-lg-".concat(String(i))],!1!==l&&e["grid-xl-".concat(String(l))]]}})((function(t){var e=t.ownerState;return Object(c.a)({boxSizing:"border-box"},e.container&&{display:"flex",flexWrap:"wrap",width:"100%"},e.item&&{margin:0},e.zeroMinWidth&&{minWidth:0},"nowrap"===e.wrap&&{flexWrap:"nowrap"},"reverse"===e.wrap&&{flexWrap:"wrap-reverse"})}),(function(t){var e=t.theme,n=t.ownerState;return Object(s.b)({theme:e},n.direction,(function(t){var e={flexDirection:t};return 0===t.indexOf("column")&&(e["& > .".concat(v.item)]={maxWidth:"none"}),e}))}),(function(t){var e=t.theme,n=t.ownerState,a=n.container,c=n.rowSpacing,i={};return a&&0!==c&&(i=Object(s.b)({theme:e},c,(function(t){var n=e.spacing(t);return"0px"!==n?Object(r.a)({marginTop:"-".concat(w(n))},"& > .".concat(v.item),{paddingTop:w(n)}):{}}))),i}),(function(t){var e=t.theme,n=t.ownerState,a=n.container,c=n.columnSpacing,i={};return a&&0!==c&&(i=Object(s.b)({theme:e},c,(function(t){var n=e.spacing(t);return"0px"!==n?Object(r.a)({width:"calc(100% + ".concat(w(n),")"),marginLeft:"-".concat(w(n))},"& > .".concat(v.item),{paddingLeft:w(n)}):{}}))),i}),(function(t){var e=t.theme,n=t.ownerState;return e.breakpoints.keys.reduce((function(t,r){return function(t,e,n,r){var a=r[n];if(a){var i={};if(!0===a)i={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===a)i={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{var o=Object(s.d)({values:r.columns,base:e.breakpoints.values}),u="".concat(Math.round(a/o[n]*1e8)/1e6,"%"),d={};if(r.container&&r.item&&0!==r.columnSpacing){var l=e.spacing(r.columnSpacing);if("0px"!==l){var j="calc(".concat(u," + ").concat(w(l),")");d={flexBasis:j,maxWidth:j}}}i=Object(c.a)({flexBasis:u,flexGrow:0,maxWidth:u},d)}0===e.breakpoints.values[n]?Object.assign(t,i):t[e.breakpoints.up(n)]=i}}(t,e,r,n),t}),{})})),C=i.forwardRef((function(t,e){var n,r=Object(j.a)({props:t,name:"MuiGrid"}),s=Object(u.a)(r),l=s.className,p=s.columns,m=s.columnSpacing,f=s.component,g=void 0===f?"div":f,v=s.container,w=void 0!==v&&v,C=s.direction,y=void 0===C?"row":C,k=s.item,U=void 0!==k&&k,M=s.lg,W=void 0!==M&&M,D=s.md,R=void 0!==D&&D,T=s.rowSpacing,z=s.sm,F=void 0!==z&&z,V=s.spacing,B=void 0===V?0:V,G=s.wrap,L=void 0===G?"wrap":G,I=s.xl,N=void 0!==I&&I,P=s.xs,A=void 0!==P&&P,E=s.zeroMinWidth,K=void 0!==E&&E,H=Object(a.a)(s,O),J=T||B,Y=m||B,q=i.useContext(b),Q=p||q||12,X=Object(c.a)({},s,{columns:Q,container:w,direction:y,item:U,lg:W,md:R,sm:F,rowSpacing:J,columnSpacing:Y,wrap:L,xl:N,xs:A,zeroMinWidth:K}),Z=function(t){var e=t.classes,n=t.container,r=t.direction,a=t.item,c=t.lg,i=t.md,o=t.sm,s=t.spacing,u=t.wrap,l=t.xl,j=t.xs,b={root:["root",n&&"container",a&&"item",t.zeroMinWidth&&"zeroMinWidth",n&&0!==s&&"spacing-xs-".concat(String(s)),"row"!==r&&"direction-xs-".concat(String(r)),"wrap"!==u&&"wrap-xs-".concat(String(u)),!1!==j&&"grid-xs-".concat(String(j)),!1!==o&&"grid-sm-".concat(String(o)),!1!==i&&"grid-md-".concat(String(i)),!1!==c&&"grid-lg-".concat(String(c)),!1!==l&&"grid-xl-".concat(String(l))]};return Object(d.a)(b,x,e)}(X);return n=Object(h.jsx)(S,Object(c.a)({ownerState:X,className:Object(o.a)(Z.root,l),as:g,ref:e},H)),12!==Q?Object(h.jsx)(b.Provider,{value:Q,children:n}):n}));e.a=C}}]);
//# sourceMappingURL=8.ea2d8df8.chunk.js.map