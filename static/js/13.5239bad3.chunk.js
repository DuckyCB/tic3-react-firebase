(this["webpackJsonptic3-react-firebase"]=this["webpackJsonptic3-react-firebase"]||[]).push([[13],{186:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return F}));var r=a(46),n=a(0),s=a.n(n),c=a(1),u=a(251),i=a(14),o=a(21),l=a(70),b=a(3),j=a(110),m=a(39),d=a(67),f=a(62),p=a(43),x=function(){var e=Object(c.a)(s.a.mark((function e(t,a,r,n,c,u){var i,o;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a&&r&&n&&c){e.next=2;break}throw new Error("empty field");case 2:return i=Object(d.b)(),e.prev=3,e.next=6,O(c);case 6:return e.next=8,Object(d.a)(i,t,a);case 8:return o=e.sent,e.next=11,h(o.user.uid,t,r,n,c,u);case 11:return e.abrupt("return",o.user);case 14:throw e.prev=14,e.t0=e.catch(3),e.t0;case 17:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,a,r,n,s,c){return e.apply(this,arguments)}}(),h=function(){var e=Object(c.a)(s.a.mark((function e(t,a,r,n,c,u){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.l)(Object(f.d)(p.db,"users",t),{email:a,firstName:r,lastName:n,username:c,postsCount:0,subscriptions:[],avatar:u});case 2:case"end":return e.stop()}}),e)})));return function(t,a,r,n,s,c){return e.apply(this,arguments)}}(),O=function(){var e=Object(c.a)(s.a.mark((function e(t){var a,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(f.k)(Object(f.c)(p.db,"users"),Object(f.m)("username","==",t)),e.next=3,Object(f.f)(a);case 3:if(r=e.sent,!(r.docs.map((function(e){return e.data})).length>=1)){e.next=7;break}throw new Error("username already exists");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=a(250),g=a(276),w=a(162),y=a(263),C=a(169),S=a(164),k=a(168),N=a(266),W=a(248),E=a(71),q=a(7),A=["onChange"];function F(){var e=Object(o.f)(),t=(Object(b.useContext)(j.a).firebase,Object(b.useState)("")),a=Object(i.a)(t,2),n=a[0],d=a[1],f=Object(b.useState)(""),p=Object(i.a)(f,2),h=p[0],O=p[1],F=Object(b.useState)(""),D=Object(i.a)(F,2),J=D[0],T=D[1],U=Object(b.useState)(""),I=Object(i.a)(U,2),K=I[0],L=I[1],P=Object(b.useState)(""),R=Object(i.a)(P,2),V=R[0],z=R[1],B=Object(b.useState)(!1),G=Object(i.a)(B,2),H=G[0],M=G[1],Q=Object(b.useState)(""),X=Object(i.a)(Q,2),Y=X[0],Z=X[1],$=Object(W.a)(),_=$.register,ee=($.handleSubmit,$.setError),te=$.formState.errors,ae=$.clearErrors,re=Object(b.useRef)(null),ne=_("username"),se=(ne.onChange,Object(u.a)(ne,A)),ce=function(){var t=Object(c.a)(s.a.mark((function t(a){var r;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),t.prev=1,!ue(n)){t.next=6;break}return M(!0),ee("username",{type:"manual",message:"username can't have white spaces"}),t.abrupt("return");case 6:return t.next=8,x(K,V,h,J,n,Y);case 8:return t.sent,t.next=11,Object(E.b)(K,V);case 11:e.push(m.a),t.next=20;break;case 14:t.prev=14,t.t0=t.catch(1),r=t.t0.message,t.t0.code,"username already exists"===r&&(M(!0),ee("username",{type:"manual",message:"username already exists"})),console.error(r);case 20:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}(),ue=function(e){return e.indexOf(" ")>=0};return Object(b.useEffect)((function(){document.title="Kinchoo signup"}),[]),Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)(g.a,{component:"main",maxWidth:"xs",children:[Object(q.jsx)(w.a,{}),Object(q.jsxs)(C.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(q.jsx)(S.a,{sx:{m:1,bgcolor:"#ef6c00"}}),Object(q.jsx)(k.a,{component:"h1",variant:"h5",children:"Sign up"}),Object(q.jsxs)(C.a,{component:"form",noValidate:!0,onSubmit:ce,sx:{mt:3},children:[Object(q.jsxs)(v.a,{container:!0,spacing:2,children:[Object(q.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(q.jsx)(y.a,{autoComplete:"given-name",name:"firstName",required:!0,fullWidth:!0,id:"firstName",label:"First Name",autoFocus:!0,value:h,onChange:function(e){var t=e.target;return O(t.value)}})}),Object(q.jsx)(v.a,{item:!0,xs:12,sm:6,children:Object(q.jsx)(y.a,{required:!0,fullWidth:!0,id:"lastName",label:"Last Name",name:"lastName",autoComplete:"family-name",value:J,onChange:function(e){var t=e.target;return T(t.value)}})}),Object(q.jsx)(v.a,{item:!0,xs:12,children:Object(q.jsx)(y.a,Object(r.a)({required:!0,ref:re,error:H,helperText:te.username&&te.username.message,fullWidth:!0,id:"username",label:"Username",value:n,onChange:function(e){var t=e.target;ae("username"),M(!1),d(t.value)}},se))}),Object(q.jsx)(v.a,{item:!0,xs:12,children:Object(q.jsx)(y.a,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:K,onChange:function(e){var t=e.target;return L(t.value)}})}),Object(q.jsx)(v.a,{item:!0,xs:12,children:Object(q.jsx)(y.a,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:V,onChange:function(e){var t=e.target;return z(t.value)}})}),Object(q.jsx)(v.a,{item:!0,xs:12,children:Object(q.jsx)(y.a,{fullWidth:!0,name:"avatar",label:"Avatar link",type:"avatar",id:"avatar",value:Y,onChange:function(e){var t=e.target;return Z(t.value)}})})]}),Object(q.jsx)(N.a,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),Object(q.jsx)(v.a,{container:!0,justifyContent:"flex-end",children:Object(q.jsx)(v.a,{item:!0,children:Object(q.jsx)(k.a,{component:l.b,to:m.c,color:"inherit",children:"Already have an account? Sign in"})})})]})]})]})})}}}]);
//# sourceMappingURL=13.5239bad3.chunk.js.map